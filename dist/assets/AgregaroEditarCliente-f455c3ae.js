import{m as K,n as R,a4 as Z,i as F,s as M,r as E,o as a,c as i,d as u,a as o,w as r,v as m,ab as H,p as b,F as p,k as f,l as L,b as j,ac as V,Z as N,h as q,t as v}from"./index-99ec7279.js";const G={key:0,class:"mt-4"},J={key:1,class:"mt-4"},O=o("hr",null,null,-1),P={class:"form-group"},Q=o("label",{for:"id_id",class:"control-label fw-bold"},"DNI",-1),W=["disabled","onKeyup"],X={class:"form-group"},Y=o("label",{for:"name_id",class:"control-label fw-bold"},"Nombre Completo",-1),ee={class:"form-group"},oe=o("label",{for:"domicilio_id",class:"control-label fw-bold"},"Domicilio",-1),le={class:"row"},se={class:"col-md-4 col-sm-4 col-xs-4"},te={class:"form-group"},ae=o("label",{for:"abono_id",class:"control-label fw-bold"},"Abono",-1),ie=["value"],ne={class:"col-md-4 col-sm-4 col-xs-4"},re={class:"form-group"},de=o("label",{for:"barrio_id",class:"control-label fw-bold"},"Barrio",-1),ue=["value"],ce={class:"col-md-4 col-sm-4 col-xs-4"},me={class:"form-group"},pe=o("label",{for:"zone_id",class:"control-label fw-bold"},"Zona",-1),ve=["value"],_e={class:"form-group"},be=o("label",{for:"tel_id",class:"control-label fw-bold"},"Telefono",-1),fe={class:"input-group"},he={key:0,type:"submit",class:"btn btn-success me-2","id:":""},ge={key:1,type:"submit",class:"btn btn-success","id:":""},ke={__name:"AgregaroEditarCliente",setup(ye){const d=K(),_=R(),D=Z(),{getColeccion:we,addDoc:h,customAlert:U}=D,g=F(),{clientes:y,barrios:w,abonos:z}=M(g),{cargarClientes:A}=g,C=E(null),s=E({id:null,name:null,domicilio:null,barrio:null,zona:null,abono:null,tel:null}),k=d.params.id==null;async function S(){if(d.params.id!=null){const t=await V(N(q,"clientes",d.params.id));t.data()==null?(_.push("/admin"),alert("Cliente inexistente")):(s.value={id:t.id,...t.data()},x(s.value.barrio),console.log("El cliente esta listo para ser editado"))}}S();async function T(t,e){try{(await V(N(q,"clientes",t))).data()==null?(await h("clientes",t,e),y.value.push(e),_.push("/admin")):alert("El DNI ya se encuentra registrado")}catch(n){console.log(n)}}async function $(t,e){try{await h("clientes",t,e),y.value=A(),setTimeout(()=>_.push("/admin"),2e3)}catch(n){console.log(n)}}const B=()=>{s.value.id=s.value.id.trim()},x=t=>{w.value.forEach(e=>{e.name==t&&(C.value=e)})},I=()=>{k?T(s.value.id,s.value):($(s.value.id,s.value),U("El cliente fue editado exitosamente","success"))};return(t,e)=>{var n;return a(),i(p,null,[u(d).params.id?(a(),i("h1",G,"Editar Cliente")):(a(),i("h1",J,"Cargar Cliente")),O,o("form",{onSubmit:e[9]||(e[9]=j(l=>I(),["prevent"]))},[o("div",P,[Q,r(o("input",{required:"",disabled:!u(k),"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.id=l),onKeyup:H(B,["space"]),id:"id_id",type:"text",class:"form-control",placeholder:"Numero de Documento"},null,40,W),[[m,s.value.id]])]),o("div",X,[Y,r(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.name=l),id:"name_id",type:"text",class:"form-control",placeholder:"Apellido y Nombre"},null,512),[[m,s.value.name]])]),o("div",ee,[oe,r(o("input",{required:"",id:"domicilio_id","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.domicilio=l),type:"text",class:"form-control",placeholder:"Introduce el domicilio de Instalacion"},null,512),[[m,s.value.domicilio]])]),o("div",le,[o("div",se,[o("div",te,[ae,r(o("select",{required:"",class:"form-control",id:"abono_id","onUpdate:modelValue":e[3]||(e[3]=l=>s.value.abono=l)},[(a(!0),i(p,null,f(u(z),(l,c)=>(a(),i("option",{value:l.id},v(l.name)+" - $"+v(l.precio),9,ie))),256))],512),[[b,s.value.abono]])])]),o("div",ne,[o("div",re,[de,r(o("select",{required:"",class:"form-control",id:"barrio_id","onUpdate:modelValue":e[4]||(e[4]=l=>s.value.barrio=l),onChange:e[5]||(e[5]=l=>x(s.value.barrio))},[(a(!0),i(p,null,f(u(w),(l,c)=>(a(),i("option",{key:c,value:l.name},v(l.name),9,ue))),128))],544),[[b,s.value.barrio]])])]),o("div",ce,[o("div",me,[pe,s.value.barrio?r((a(),i("select",{key:0,required:"",class:"form-control",id:"zona_id","onUpdate:modelValue":e[6]||(e[6]=l=>s.value.zona=l)},[(a(!0),i(p,null,f((n=C.value)==null?void 0:n.zonas,(l,c)=>(a(),i("option",{key:c,value:l},v(l),9,ve))),128))],512)),[[b,s.value.zona]]):L("",!0)])])]),o("div",_e,[be,r(o("input",{required:"",type:"text",class:"form-control",id:"tel_id",placeholder:"Numero de Telefono","onUpdate:modelValue":e[7]||(e[7]=l=>s.value.tel=l)},null,512),[[m,s.value.tel]])]),o("div",fe,[u(d).params.id?(a(),i("button",he," Editar Cliente ")):(a(),i("button",ge," Registrar Nuevo Cliente ")),o("button",{onClick:e[8]||(e[8]=l=>t.$router.push("/admin")),class:"btn btn-warning"}," Volver ")])],32)],64)}}};export{ke as default};
